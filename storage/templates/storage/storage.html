{% extends "main/base.html" %}

{% block title_h1 %}
<a href="{% url 'storage:storage'%}">Склад</a> / <a href="{% url 'storage:reserve'%}">Резерв</a>
{% endblock %}

{% block breadcrumb_buttons %}
    <button onclick="location.href='{% url 'storage:review_textile' %}'" type="button" class="btn btn-secondary mb-2 mb-md-0 d-none d-lg-block pd-t-6-force pd-b-5-force" >
    <i data-feather="file-plus" class="wd-16 mr-2"></i>Добавить</button>
{% endblock %}

{% block body_content %}
                     <!-- Filtering FooTable Start -->
                     <!--================================-->
                     <div class="col-md-12 col-lg-12">
                        <div class="card mg-b-30">

                           <div class="card-body pd-0">


                                           <div class="row">
                                             <div class="mg-20 form-inline wd-100p">
                                                <div class="col-sm-6">

                                                   <div class="form-group">
                                                       <label class="form-control-label tx-right">Тип:</label>
                                                      <select id="foo-filter-status" class="custom-select custom-select-sm">
                                                         <option value="">Показать все</option>
                                                         <option value="Текстиль">Текстиль</option>
                                                         <option value="Карнизы">Карнизы</option>

                                                      </select>
                                                   </div>
                                                </div>

                                                <div class="col-sm-6">
                                                   <div class="form-group ft-right">
                                                      <input id="foo-search" type="text" placeholder="Поиск" class="form-control" autocomplete="off">
                                                   </div>
                                                </div>

                                             </div>
                                          </div>
                                          <table id="foo-filtering" class="table table-bordered table-hover toggle-circle" data-page-size="50">
                                              <thead class="tx-10 tx-uppercase">
                                                 <tr>
                                                     <th>Тип</th>
                                                     <th>Позиция</th>
                                                     <th>Поставщик</th>
                                                     <th>Количество</th>
                                                     <th>Зарезервировано</th>
                                                     <th>Доступно</th>
                                                     <th>Закупочная цена (средняя)</th>
                                                     <th>Дата добавления</th>
                                                     <th>Действия</th>
                                                 </tr>
                                              </thead>
                                             <tbody>
                                                {% load mathfilters %}
                                                {% for q in orders %}
                                                    <tr class="table table-bordered table-hover">
                                                        <td>{{q.type_p}}</td>
                                                        <td>{{q.item.collection}} {{q.item.model}} {{q.item.color}}</td>
                                                        <td>{{q.item.manufacturer.name}}</td>
                                                        <td>{{q.quantity}}</td>
                                                        <td>
                                                            {% for r in reserve %}
                                                                {% if r.item == q %}
                                                                    {{r.quantity}} ({{r.order.number}})<br>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </td>
                                                        <td>
                                                            {% get_storage_item q.id as storage_result %}
                                                            {{ storage_result }}
                                                        </td>
                                                        <td>{{q.price}}</td>
                                                        <td>{{q.date_created|date:'d.m.Y H:i'}}</td>

                                                        <td class="tx-right">
                                                            <a href="{% url 'storage:remove_textile' id=q.id%}" title="" data-toggle="tooltip" data-original-title="Удалить"><i data-feather="x" class="wd-16"></i></a>
                                                        </td>

                                                    </tr>
                                                {% endfor %}


                                             </tbody>

                                          </table>


                           </div>
                        </div>
                     </div>
                     <!--/ Filtering FooTable End -->




{% endblock %}